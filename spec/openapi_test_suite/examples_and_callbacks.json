[
  {
    "description": "Components with examples and callbacks",
    "schema": {
      "openapi": "3.1.0",
      "info": {
        "title": "API with examples and callbacks",
        "version": "1.0.0"
      },
      "paths": {
        "/users": {
          "post": {
            "requestBody": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/User"
                  },
                  "examples": {
                    "default": {
                      "$ref": "#/components/examples/user"
                    }
                  }
                }
              }
            },
            "responses": {
              "201": {
                "description": "Created",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            },
            "callbacks": {
              "statusUpdate": {
                "$ref": "#/components/callbacks/statusUpdate"
              }
            }
          }
        }
      },
      "components": {
        "schemas": {
          "User": {
            "type": "object",
            "properties": {
              "id": {
                "type": "integer"
              },
              "name": {
                "type": "string"
              },
              "email": {
                "type": "string",
                "format": "email"
              }
            },
            "required": [
              "name",
              "email"
            ]
          }
        },
        "examples": {
          "user": {
            "value": {
              "id": 1,
              "name": "John Doe",
              "email": "john@example.com"
            },
            "summary": "A sample user"
          }
        },
        "callbacks": {
          "statusUpdate": {
            "{$request.body#/callbackUrl}": {
              "post": {
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "status"
                        ]
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Notification received"
                  }
                }
              }
            }
          }
        }
      }
    },
    "tests": [
      {
        "description": "schema that uses $ref to examples and callbacks",
        "data": {
          "method": "post",
          "path": "/users",
          "request": {
            "headers": {
              "Content-Type": "application/json"
            },
            "body": "{\"name\": \"Jane Smith\", \"email\": \"jane@example.com\"}"
          },
          "response": {
            "status": 201,
            "headers": {
              "Content-Type": "application/json"
            },
            "body": "{\"id\": 2, \"name\": \"Jane Smith\", \"email\": \"jane@example.com\"}"
          }
        },
        "valid": true
      }
    ]
  }
]
